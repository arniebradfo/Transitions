// HEADING //
// heading.less //
// .heading--has-featured-media | .heading--lacks-featured-media

.heading_Height(@viewHeight: 70){
	height: @viewHeight *1vh;
	height: calc(@1vh * @viewHeight);
}

.heading{
	position: relative;
}
.heading__wrapper{
	@column_Rules();
	padding-top: 0;
	padding-bottom: @s8; 
	display: flex;
	flex-direction: column;
	align-items: flex-start;

}

.heading__site-title{
	margin: @s12 -@s16;
	z-index: 0;
	// .heading4_Type();
}

.heading__logo{
	margin: @s32 0;
	// TODO: account for other sizes?
	.custom-logo{
		height: @s8*24;
		max-width: 100%;
		filter: drop-shadow( 0px 3px 6px @textShadow_Color);
		// opacity: @fgPrimary_Opacity;
	}
}

@heading__title_Margin: @s24;
.heading__title{
	margin: 0;
	margin-bottom: @heading__title_Margin;
}
.heading__rule{
	&:extend(.hr--short);
	margin: 0;
	margin-bottom: @s16;
}
.heading__subtitle{
	.subtitle_Type();
	margin: 0;
	margin-bottom: @s32 * 2;
}

.heading__menu{
	margin-bottom: @s8;
}
.heading__menu-list{
	.menu-list();
	margin: 0 -@s16;
}
// .heading__menu-list li:first-child a{
// 	&:extend(button.button--fill);
// }

.heading__featured-media{
	.absolute();
	z-index: -1;
	
	&:after{
		content: '';
		.absolute(-1px);
		background: @bgOverlayLg_Gradient;
	}

	&:before{ // shadow
		content: ''; // not there by default
		.absolute(unset 0 0 0);
		height: @s12;
		background-image: @shadowBottom_Gradient;
	}

}
.heading__img{
	height: 100%;
	width:  100%;
	object-fit: cover;
	opacity: 0.2;
}
.heading__cover-link{
	display: block;
	.absolute();

	z-index: 1;
}
.heading__meta,
.heading__tags{
	position: relative;
	z-index: 2;
}

.heading__meta{
	.subtitle_Type();
	display: inline;
}
.heading__flex-splitter{
	flex: 1 1 auto;
}


// ----- //
// TYPES //
// ----- //


// ARCHIVE //
.heading--archive{}

// HOME //
.heading--home{
	.heading__wrapper{
		.heading_Height();
	}
}

// PAGE //
.heading--page{
	.heading__wrapper{
		.heading_Height();
	}
}

// POST PAGE //
.heading--post-full{
	.heading__wrapper{
		.heading_Height();
		
	}
	.heading__tags{
		margin-right: -@s16;
		margin-left:  -@s16;
	}
}

// ADJACENT POST //
.heading--post-adjacent{
	.heading__wrapper{
		.heading_Height();
		justify-content: center;
	}
	.heading__tags{
		margin-right: -@s16;
		margin-left:  -@s16;
	}
	.heading__featured-media{
		&:before{ // shadow
			bottom: unset;
			top: 0;
			background-image: @shadowTop_Gradient;
		}
	}
}
.heading__primary-button{
	margin: 0 -@s16;
	z-index: 2;
}

// POST LIST //
.heading--post-list{
	&.heading--has-featured-media{
		.heading__wrapper{
			.heading_Height(30);
		}
	}
	.heading__wrapper{
		position: relative;
		padding: 0 @column_Padding;
	}
	.heading__featured-media{
		border-radius: @border_Radius;
		overflow: hidden;

		&:before{ // shadow
			content: none;
		}
	}
	.heading__tags{
		// padding: 0;
		margin-right: (@column_Padding - @s16);
		margin-left:  (@column_Padding - @s16);
	}
}

// SEARCH //
.heading--search{}
.heading__searchform{
	margin: 0 -@s16;
}



// ------ //
// STATES //
// ------ //

.post--in-list{ // .post{
	
	.heading--post-list{}

	// &:normal //
	// Text moves up
	// border is revealed
	.heading__wrapper{
		transform: translate(0, 0);
		margin-bottom: @s8;
		padding-top: @s16;

		@offset: @border_Size*2 + @s4;

		position: relative;
		&:after{
			content: '';
			.absolute(0);
			border: @border_Size*2 solid transparent;
			border-radius: @border_Radius + @offset;
			z-index: -1;
		}

		.heading__featured-media{
			.absolute(@offset);

			&:after{
				
				background-image: linear-gradient( -45deg, fade(white, 0%),  fade(white, 100%));
				background-color: transparent;
				background-color: fade(black, 50%);
				opacity: 0.3;
				background-size: 110% 110%;
				.transition(background-color opacity);

			}

			&:before{ // shadow
				content: none;
			}
		}

	}
	.heading__rule{
		margin: 0;
		opacity: 0;
		.transition(opacity);
	}

	.heading__meta, .heading__title{
		transform: translate(0, @heading__title_Margin + @s8);
		.transition(transform);
	}

	
	&:hover{
		.heading__wrapper {
			&:after{
				border-color: @fgWeaker_Color;
			}
		}

		.heading__rule{
			opacity: 1;
		}

		.heading__meta, .heading__title{
			transform: translate(0, 0);
		}

		.heading__featured-media{
			&:after{
				background-color: black;
				opacity: 0.5;
			}
		}

	}

	.heading__cover-link:hover{
		// background: red;
		//  ~ .heading__wrapper:after {
		// 	border-color: @accentPrimary_Color;
		// }
		~ .heading__rule{
			background-color: @accentPrimary_Color;
		}
		~ .heading__title{
			color: @fgStrong_Color;
		}

		~ .heading__featured-media{
			&:after{
				// background-position: 100% 100%;
				opacity: 0.7;
				background-color: @accentDeep_Color;
			}
		}

	}


}
